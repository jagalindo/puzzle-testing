package fr.inria.diverse.refm.competition.lopez;

import java.util.ArrayList;
import java.util.List;

import org.junit.Before;
import org.junit.Test;

import es.us.isa.FAMA.models.FAMAfeatureModel.FAMAFeatureModel;
import fr.inria.diverse.refm.competition.common.utils.fitness.Fitness;
import fr.inria.diverse.refm.competition.common.utils.fitness.Precision;

public class BenchmarkingLopezREFM {

	private LopezREFM synthesizer;
	private List<Fitness> fitnessFunctions;
	
	@Before
	public void loadScenarios(){
		synthesizer = new LopezREFM();
		fitnessFunctions = new ArrayList<Fitness>();
		fitnessFunctions.add(new Precision());
	}
	
	@Test
	public void executeBenchmark() throws Exception{
		for (int i = 1; i <= 2; i++) {
			FAMAFeatureModel result = synthesizer.execute("testdata/" + i + "_3_closed_pcm.txt");
			this.printFitness(result);
		}
	}

	private void printFitness(FAMAFeatureModel fm) {
		System.out.println("***");
		System.out.println("******");
		System.out.println("Printing the evaluation metrics for the resulting feature model");
		for (Fitness fitness : fitnessFunctions) {
			System.out.println("  - " + fitness.getName() + ": " + fitness.compute(fm));
		}
	}
	
}
